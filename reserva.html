<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reserva Lavadero</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  :root {
    --primary: #0a84ff;
    --primary-dark: #0056d2;
    --bg-dark: #111;
    --text-light: #fff;
  }

  body {
    font-family: 'Poppins', sans-serif;
    background-color: #f8f9fa;
    color: #000;
  }

  .reserva-container {
    background: var(--bg-dark);
    color: var(--text-light);
    padding: 2rem;
    border-radius: 1rem;
    box-shadow: 0 0 25px rgba(10, 132, 255, 0.3);
    max-width: 700px;
    margin: 40px auto;
  }

  .reserva-container h2 {
    text-align:center;
    color: var(--primary);
    margin-bottom: 1.5rem;
  }

  .service-card {
    background: #1a1a1a;
    padding: 1rem;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s;
    border: 2px solid transparent;
    display:flex;
    align-items:center;
    user-select:none;
  }

  .service-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
  .service-card.selected { border-color: var(--primary); background: rgba(10,132,255,0.1); }
  .service-card span { margin-left: 10px; flex:1; }
  .service-card input { display: none; }

  input, select { width:100%; padding:10px; margin-top:5px; border:none; border-radius:8px; background:#222; color:#fff; }
  input:focus, select:focus { outline: 2px solid var(--primary); box-shadow: 0 0 5px rgba(10,132,255,0.5); }

  button[type="submit"] {
    width:100%;
    margin-top:20px;
    background: linear-gradient(90deg,var(--primary),var(--primary-dark));
    border:none;
    border-radius:8px;
    padding:12px;
    color:#fff;
    font-weight:600;
    transition: transform 0.2s;
  }
  button[type="submit"]:hover { transform: scale(1.02); }

  .mensaje { display:none; text-align:center; color:#00d46a; margin-top:10px; font-weight:500; }
  .total { margin-top:1rem; text-align:right; font-weight:600; font-size:1.1rem; }
</style>
</head>
<body>

<section class="py-5">
  <div class="reserva-container">
    <h2>Reserva tu Turno</h2>
    <form id="formReserva">
      <div class="mb-3">
        <label for="nombre" class="form-label">Nombre completo</label>
        <input type="text" class="form-control" id="nombre" placeholder="Ej: Juan Pérez" required>
      </div>
      <div class="mb-3">
        <label for="telefono" class="form-label">Teléfono</label>
        <input type="tel" class="form-control" id="telefono" placeholder="Ej: 099123456" required>
      </div>
      <div class="row g-3 mb-3">
        <div class="col-md-6">
          <label for="fecha" class="form-label">Fecha</label>
          <input type="date" class="form-control" id="fecha" required>
        </div>
        <div class="col-md-6">
          <label for="hora" class="form-label">Hora</label>
          <input type="time" class="form-control" id="hora" required>
        </div>
      </div>

      <h5 class="mb-2">Servicios disponibles</h5>
      <div class="row g-3">
        <div class="col-12 col-sm-6 col-md-4">
          <label class="service-card"><input type="checkbox" value="Lavado exterior completo" data-precio="15"><span>Lavado exterior completo - $15</span></label>
        </div>
        <div class="col-12 col-sm-6 col-md-4">
          <label class="service-card"><input type="checkbox" value="Aspirado interior profundo" data-precio="20"><span>Aspirado interior profundo - $20</span></label>
        </div>
        <div class="col-12 col-sm-6 col-md-4">
          <label class="service-card"><input type="checkbox" value="Pulido y encerado" data-precio="50"><span>Pulido y encerado - $50</span></label>
        </div>
        <div class="col-12 col-sm-6 col-md-4">
          <label class="service-card"><input type="checkbox" value="Protección cerámica" data-precio="100"><span>Protección cerámica - $100</span></label>
        </div>
        <div class="col-12 col-sm-6 col-md-4">
          <label class="service-card"><input type="checkbox" value="Limpieza de llantas y motor" data-precio="30"><span>Limpieza de llantas y motor - $30</span></label>
        </div>
      </div>

      <div class="total">Total: $<span id="total">0</span></div>

      <button type="submit" class="btn btn-primary mt-3">Enviar Reserva por WhatsApp</button>
      <p class="mensaje">✅ Enviando reserva...</p>
    </form>
  </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const serviceCards = document.querySelectorAll('.service-card');
  const totalEl = document.getElementById('total');

  function actualizarTotal() {
    let total = 0;
    serviceCards.forEach(card => {
      const checkbox = card.querySelector('input');
      if (checkbox.checked) total += Number(checkbox.dataset.precio);
    });
    totalEl.textContent = total;
  }

  serviceCards.forEach(card => {
    card.addEventListener('click', () => {
      const checkbox = card.querySelector('input');
      checkbox.checked = !checkbox.checked;
      card.classList.toggle('selected', checkbox.checked);
      actualizarTotal();
    });
  });

  document.getElementById('formReserva').addEventListener('submit', e => {
    e.preventDefault();
    const mensajeEl = document.querySelector('.mensaje');
    mensajeEl.style.display = 'block';
    mensajeEl.textContent = '✅ Preparando reserva...';

    const nombre = document.getElementById('nombre').value.trim();
    const telefono = document.getElementById('telefono').value.trim();
    const fecha = document.getElementById('fecha').value;
    const hora = document.getElementById('hora').value;
    const servicios = Array.from(document.querySelectorAll('.service-card input:checked')).map(i => `${i.value} ($${i.dataset.precio})`);
    const total = totalEl.textContent;

    let mensaje = `Hola! Quiero reservar un turno.\n\nNombre: ${nombre}\nTeléfono: ${telefono}\nFecha: ${fecha}\nHora: ${hora}\n\nServicios seleccionados:\n`;
    servicios.forEach(s => mensaje += `• ${s}\n`);
    mensaje += `\nTotal: $${total}`;

    const url = `https://wa.me/59899946914?text=${encodeURIComponent(mensaje)}`;
    setTimeout(() => {
      window.open(url,'_blank');
      mensajeEl.textContent = '✅ Reserva enviada!';
      setTimeout(() => mensajeEl.style.display = 'none',3000);
    }, 500);
  });
</script>

</body>
</html>
        const result = await res.json();
        if (result.status === 'success') {
          // Mostrar confirmación
          confirmationDiv.style.display = 'block';
          whatsappLink.href = `https://wa.me/1234567890?text=Hola,%20quiero%20confirmar%20mi%20turno%20para%20el%20${reservationData.date}%20a%20las%20${reservationData.time}%20(${reservationData.service})`;
          reservationForm.reset();
          timeSelect.innerHTML = '<option value="">Selecciona un horario</option>';
        } else {
          alert('Error: ' + result.message);
        }
      } catch (error) {
        console.error('Error enviando reserva:', error);
        alert('No se pudo procesar la reserva. Intenta nuevamente.');
      }
    });
  </script>
</body>
</html>
